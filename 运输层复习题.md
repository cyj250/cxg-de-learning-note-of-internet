# 第三章运输层复习题

**R1**

a. 将此协议简称为简单传输协议(STP)。在发送方，STP从发送进程接受不超过1196字节的数据块、目标主机地址和目标端口号。STP在每个块中添加一个4字节的头，并将目标进程的端口号放在这个标头中。然后STP将目标主机地址和结果段提供给网络层。网络层将段传送到目标主机的STP。STP检查段中的端口号，从段中提取数据，并将数据传递给由端口号标识的进程。

b. 段现在有两个头字段：源端口号字段和目标端口号字段。在发送方，STP接收不超过1192字节的数据块、目标主机地址、源端口号、目标端口号。STP创建一个段，其中包含应用程序数据、源端口号和目标端口号。然后，将段和目标主机地址提供给网络层。在接收到段后，接收主机上的STP给出应用程序的数据和源端口号。

c.不。

**R2**

a. 在寄信时，家庭成员必须将信件本身、目的地址和收件人的姓名交给代表。代表将收件人的姓名写在信件的顶部。然后，代表将信放入信封中，在信封上写清楚目的地址，交给邮件服务部门。在接收方，代表收到来自信件服务的信函，从信封中取出信件，并记下在信件顶部写的姓名。然后交给该家庭成员。

b. 不用，只检查信封上的地址即可。

**R3**

源端口号y和目标端口号x。

**R4**

应用程序开发人员可能不希望其应用程序使用TCP的拥塞控制，这会在拥塞时限制应用程序的发送速率。通常，IP电话和IP视频会议应用程序的设计者选择在UDP上运行他们的应用程序，因为他们希望避免TCP的拥塞控制。另外，有些应用程序不需要TCP提供的可靠数据传输。

**R5**

由于大多数防火墙都被配置为阻止UDP通信，因此使用TCP进行视频和语音通信可以让通信通过防火墙。

**R6**

可能。应用程序开发人员可以将可靠的数据传输放到应用层中协议。但是，这需要大量的工作和调试。

**R7**

是的，两个段将指向同一个套接字。对于每个接收到的段，在套接字接口上，操作系统将为进程提供源IP地址，以确定各个段的来源。

**R8**

UDP套接字标识符是一个二元组（目标IP和目标port），TCP套接字标识符是四元组（源IP、源port、目标IP、目标port）

对于每个持久连接，web服务器创建一个单独的“连接套接字”。每个连接套接字被标识为具有四个元祖。当主机c接收数据报，它检查数据报中的这四个字段确定哪个套接字应该通过TCP段的有效负载。因此，来自A和B的请求通过不同的套接字。这两个参数的标识符用于目标端口的套接字具有80；但是，这些套接字的标识符源IP地址不同。

**R9**

接收机需要序列号来确定到达的数据包是包含新数据还是重传。

**R10**

处理通道中的损失。如果在该分组的计时器持续时间内未接到发送分组的ACK，则假定该分组（或其ACK/NACK）已丢失。因此，分组被重传。

**R11**

在`RDT 3.0`协议中仍然需要计时器。如果知道往返时间，那么唯一的优势是，发送方肯定知道数据包或数据包的ACK（或Nack）已经丢失，而实际情况是，在计时器过期后，ACK（或Nack）可能仍在发送方的途中。然而，要检测丢失，对于每个包，一个持续时间不变的定时器仍然需要在发送者。（？？？）

**R12**

a.丢包造成一段时间后，所有五个包都被重传。

b.由于Go-Back-N使用累积数据，ACK的丢失没有触发任何重传承认。

c. 发送方无法发送第六个分组，因为发送窗口大小固定为5。

**R13**

a.当分组丢失时，接收的4个分组被缓冲接收器。完成后超时，发送方重新发送丢失的数据包，接收方传送缓冲的数据包数据包以正确的顺序应用。

b.超时后重传该数据包

**R15**

a. 20bytes

b.90

**R16**

3个报文段。1.Seq=43,ack=80;2.Seq=80,ack=44;3.Seq=44,ack=81;

**R17**

`R/2`

**R18**

错误，置为拥塞窗口的当前值的一半。

**R19**

让X=RTT_{FE},Y=RTT_{BE}$和ST=搜索时间。考虑以下时序图。

![图10](https://image.feater.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B10.png?imageView2/0/q/75|watermark/2/text/aHR0cHM6Ly9mZWF0ZXIudG9w/font/5a6L5L2T/fontsize/800/fill/I0VFMUIxQg==/dissolve/100/gravity/SouthWest/dx/10/dy/10)

客户端和服务器（后端）之间使用代理（前端）之间的TCP数据包交换图。

从这个图中我们可以看到，总时间是4X+Y+ST=4*RTT_{FE}+RTT_{BE}+搜索时间。







